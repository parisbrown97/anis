<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>You’ve Got This</title>

  <style>
    :root{
      /* Locked night mode */
      --accent: #355e3b;        /* hunter green */
      --card: rgba(17,24,39,0.88);
      --text: #f9fafb;
      --muted: rgba(249,250,251,0.78);
      --border: rgba(55,65,81,0.8);
      --overlay: rgba(0,0,0,0.62);
      --shadow: 0 10px 30px rgba(0,0,0,0.5);
      --chip: rgba(53,94,59,0.18);
      --ok: rgba(16,185,129,0.18);
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px;
      overflow-x: hidden;
    }

    /* Background video */
    .bg-video {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: var(--overlay);
      z-index: 1;
    }

    .wrap {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 860px;
    }

    .card {
      background: var(--card);
      border-radius: 22px;
      padding: 26px;
      box-shadow: var(--shadow);
      border-top: 6px solid var(--accent);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
    }

    h1 {
      margin: 0 0 6px;
      font-size: 28px;
      font-weight: 650;
      letter-spacing: -0.02em;
    }

    p {
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.35;
    }

    iframe { margin-top: 10px; }

    .spotify-note {
      font-size: 13px;
      color: rgba(156,163,175,0.95);
      margin-top: 6px;
    }

    /* Widget shell */
    .widget{
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 12px 14px;
      background: rgba(17,24,39,0.45);
      margin-top: 16px;
    }

    .widget-title{
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .chip{
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid var(--border);
      white-space: nowrap;
    }

    /* Time + Weather */
    .tw-row{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
    }

    .tw-card{
      flex:1;
      min-width: 240px;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
      background: rgba(17,24,39,0.35);
    }

    .tw-top{
      display:flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 6px;
    }

    .tw-city, .tw-time{
      font-size: 13px;
      color: var(--muted);
    }

    .tw-time { white-space: nowrap; text-align: right; }

    .tw-temp{
      font-size: 18px;
      font-weight: 650;
    }

    .tw-desc{
      font-size: 12px;
      color: rgba(156,163,175,0.95);
    }

    .note{
      margin-top: 8px;
      font-size: 12px;
      color: rgba(156,163,175,0.95);
    }

    /* 3-up row */
    .grid3{
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 16px;
    }
    @media (max-width: 860px){
      .grid3{ grid-template-columns: 1fr; }
    }

    .bigline{
      font-size: 18px;
      font-weight: 650;
      line-height: 1.25;
    }

    .smallline{
      font-size: 13px;
      color: rgba(156,163,175,0.95);
      margin-top: 4px;
    }

    /* Breathing */
    .bar{
      height: 10px;
      border-radius: 999px;
      background: rgba(55,65,81,0.45);
      border: 1px solid var(--border);
      overflow: hidden;
      margin: 8px 0 0;
    }

    .bar > div{
      height: 100%;
      width: 0%;
      background: rgba(53,94,59,0.75);
      transition: width 200ms linear;
    }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .action{
      font-size: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      cursor: pointer;
      background: rgba(17,24,39,0.45);
      color: var(--text);
    }

    .action.primary{
      background: var(--accent);
      border: none;
      font-weight: 650;
    }

    /* Ravenclaw logic + Random facts + Recipes */
    .grid3b{
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 16px;
    }
    @media (max-width: 980px){
      .grid3b{ grid-template-columns: 1fr; }
    }

    .logic{
      display:none;
      margin-top: 10px;
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      background: rgba(17,24,39,0.35);
    }

    .logic.show{ display:block; }

    .logic table{
      width:100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .logic th, .logic td{
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
      vertical-align: top;
    }

    .logic th{
      color: var(--muted);
      background: rgba(17,24,39,0.35);
      text-align: left;
    }

    .logic td:last-child{
      background: var(--ok);
    }

    .links a{
      color: rgba(249,250,251,0.88);
      text-decoration: none;
      border-bottom: 1px solid rgba(249,250,251,0.18);
    }
    .links a:hover{
      border-bottom-color: rgba(249,250,251,0.55);
    }

    .linklist{
      display:flex;
      flex-wrap: wrap;
      gap:10px;
      margin-top: 10px;
    }
    .linkpill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(17,24,39,0.35);
      text-decoration: none;
      color: rgba(249,250,251,0.88);
      font-size: 13px;
      white-space: nowrap;
    }
    .linkpill:hover{ background: rgba(17,24,39,0.55); }

    /* Bottom-right signature */
    .signature-fixed{
      position: fixed;
      right: 14px;
      bottom: 12px;
      font-size: 13px;
      color: rgba(249,250,251,0.55);
      z-index: 3;
      pointer-events: none;
    }

    @media (max-width: 420px){
      h1 { font-size: 24px; }
      .card { padding: 22px; }
      .tw-card { min-width: 100%; }
    }
  </style>
</head>

<body>
  <!-- Toronto night background -->
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="toronto.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <div class="wrap">
    <div class="card">
      <h1>Hey Anis.</h1>
      <p>This is here for whenever things feel heavy — no expectations.</p>

      <!-- Spotify (your playlist) -->
      <iframe
        style="border-radius:12px"
        src="https://open.spotify.com/embed/playlist/37i9dQZF1E4qQ00I1Jm1ay?utm_source=generator&theme=0"
        width="100%"
        height="90"
        frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy">
      </iframe>
      <div class="spotify-note">Something steady for long days.</div>

      <!-- Time + Weather -->
      <div class="widget">
        <div class="widget-title">
          <span>Right now</span>
          <span class="chip" id="updatedAt">Updating…</span>
        </div>

        <div class="tw-row">
          <div class="tw-card">
            <div class="tw-top">
              <span class="tw-city">Anis • Los Angeles</span>
              <span class="tw-time" id="laTime">—</span>
            </div>
            <div class="tw-temp" id="laTemp">—</div>
            <div class="tw-desc" id="laDesc">—</div>
          </div>

          <div class="tw-card">
            <div class="tw-top">
              <span class="tw-city">You • Durham</span>
              <span class="tw-time" id="durhamTime">—</span>
            </div>
            <div class="tw-temp" id="durhamTemp">—</div>
            <div class="tw-desc" id="durhamDesc">—</div>
          </div>
        </div>

        <div class="note">LA + Durham time & weather (no logins, no tracking).</div>
      </div>

      <!-- Daily quote + intention + nudge in ONE row -->
      <div class="grid3">
        <div class="widget" style="margin-top:0;">
          <div class="widget-title"><span>Daily quote</span><span class="chip">Today</span></div>
          <div class="bigline" id="dailyQuote">—</div>
          <div class="smallline">A quiet reminder.</div>
        </div>

        <div class="widget" style="margin-top:0;">
          <div class="widget-title"><span>Today’s intention</span><span class="chip">Today</span></div>
          <div class="bigline" id="dailyIntention">—</div>
          <div class="smallline">One direction for the day.</div>
        </div>

        <div class="widget" style="margin-top:0;">
          <div class="widget-title"><span>Streak-free nudge</span><span class="chip">No streaks</span></div>
          <div class="bigline" id="habitNudge">—</div>
          <div class="smallline">If it happens, great. If not, also fine.</div>
        </div>
      </div>

      <!-- Take a breath -->
      <div class="widget">
        <div class="widget-title">
          <span>Take a breath</span>
          <span class="chip">4–4–6 ×3</span>
        </div>

        <div class="smallline" id="breathPhase">Ready.</div>
        <div class="bar"><div id="breathBar"></div></div>

        <div class="btnrow">
          <button class="action primary" id="breathStart">Start</button>
          <button class="action" id="breathStop">Stop</button>
        </div>

        <div class="smallline">Inhale 4 • Hold 4 • Exhale 6 (repeat x3)</div>
      </div>

      <!-- Give me one thing + Ravenclaw logic + Random facts + Recipes -->
      <div class="grid3b">
        <!-- Encourage + Ravenclaw logic -->
        <div class="widget" style="margin-top:0;">
          <div class="widget-title">
            <span>Support</span>
            <span class="chip">Low effort</span>
          </div>

          <div class="btnrow">
            <button class="action primary" id="encourageBtn">Give me one thing</button>
            <button class="action" id="toggleLogicBtn">Ravenclaw logic</button>
          </div>

          <div class="bigline" id="encourageLine" style="margin-top:12px; min-height:46px;"></div>
          <div class="smallline" id="signatureLine"></div>
          <div class="smallline" id="easterLine"></div>

          <div class="logic" id="logicBox">
            <table>
              <tr><th style="width:40%;">Claim</th><th>Evidence</th></tr>
              <tr><td>You belong here.</td><td>Acceptance + preparation + performance history.</td></tr>
              <tr><td>Bad moments ≠ bad doctor.</td><td>Signal ≠ identity. One datapoint doesn’t overturn the trend.</td></tr>
              <tr><td>Recovery improves output.</td><td>Rest improves judgment, memory consolidation, and precision.</td></tr>
              <tr><td>Do the next right thing.</td><td>Small actions compound. Focus on controllables.</td></tr>
            </table>
          </div>
        </div>

        <!-- Random facts -->
        <div class="widget" style="margin-top:0;">
          <div class="widget-title">
            <span>Random facts</span>
            <span class="chip" id="factTag">Tap</span>
          </div>

          <div class="bigline" id="randomFact" style="min-height:70px;">Want a tiny distraction?</div>

          <div class="btnrow">
            <button class="action primary" id="factBtn">New fact</button>
          </div>

          <div class="smallline">Lightweight on purpose.</div>
        </div>

        <!-- Recipes -->
        <div class="widget links" style="margin-top:0;">
          <div class="widget-title">
            <span>Recipe please</span>
            <span class="chip">Open a site</span>
          </div>

          <div class="bigline" style="font-size:16px; font-weight:600;">
            Pick a vibe: fast, healthy, or comfort.
          </div>

          <div class="linklist">
            <a class="linkpill" href="https://www.budgetbytes.com/" target="_blank" rel="noopener noreferrer">Budget Bytes</a>
            <a class="linkpill" href="https://www.seriouseats.com/" target="_blank" rel="noopener noreferrer">Serious Eats</a>
            <a class="linkpill" href="https://www.allrecipes.com/" target="_blank" rel="noopener noreferrer">Allrecipes</a>
            <a class="linkpill" href="https://www.bonappetit.com/" target="_blank" rel="noopener noreferrer">Bon Appétit</a>
            <a class="linkpill" href="https://www.nytimes.com/cooking" target="_blank" rel="noopener noreferrer">NYT Cooking</a>
            <a class="linkpill" href="https://www.recipetineats.com/" target="_blank" rel="noopener noreferrer">RecipeTin Eats</a>
          </div>

          <div class="smallline" style="margin-top:10px;">
            Tip: if you want, I can add a “search box” that opens results for whatever you type.
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Bottom-right signature -->
  <div class="signature-fixed">love, Paris</div>

  <script>
    /* -------------------------
       Daily deterministic picks
    ------------------------- */
    const QUOTES = [
      "Slow is smooth. Smooth is fast.",
      "Do the next right thing.",
      "You can be tired and still be capable.",
      "Calm is a form of power.",
      "Precision beats panic.",
      "Keep it simple. Keep it steady."
    ];

    const INTENTIONS = [
      "Be present.",
      "One patient, one task.",
      "Choose calm.",
      "Do what you can control.",
      "Protect your energy.",
      "Stay kind to yourself."
    ];

    const NUDGES = [
      "Drink water.",
      "Eat something real.",
      "Unclench your jaw.",
      "Lower your shoulders.",
      "Step outside for 60 seconds.",
      "Sleep when you can."
    ];

    function daySeed(){
      const d = new Date();
      return d.getFullYear()*10000 + (d.getMonth()+1)*100 + d.getDate();
    }
    function pickDaily(arr, salt=0){
      const s = daySeed() + salt*101;
      return arr[s % arr.length];
    }

    document.getElementById("dailyQuote").textContent = pickDaily(QUOTES, 1);
    document.getElementById("dailyIntention").textContent = pickDaily(INTENTIONS, 2);
    document.getElementById("habitNudge").textContent = pickDaily(NUDGES, 3);

    /* -------------------------
       Encouragement
    ------------------------- */
    const encouragement = [
      "You earned this — completely.",
      "You belong exactly where you are.",
      "If today is heavy, make it smaller: next task only.",
      "Quiet confidence goes a long way.",
      "Rest is part of staying sharp.",
      "You’re learning — that’s the point.",
      "Do the next right thing. That’s enough.",
      "Small wins still count."
    ];

    const easterEggs = [
      "",
      "",
      "Hydration matters. (You know this.)",
      "Sharp mind. Steady hands.",
      "Ravenclaws think before they act."
    ];

    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    document.getElementById("encourageBtn").onclick = () => {
      document.getElementById("encourageLine").textContent = pick(encouragement);
      document.getElementById("signatureLine").textContent = "— someone in your corner";
      document.getElementById("easterLine").textContent = pick(easterEggs);
    };

    /* -------------------------
       Ravenclaw logic toggle
    ------------------------- */
    document.getElementById("toggleLogicBtn").onclick = () => {
      document.getElementById("logicBox").classList.toggle("show");
    };

    /* -------------------------
       Random facts
    ------------------------- */
    const FACTS = [
      "Honey never spoils — sealed jars have been found edible thousands of years later.",
      "Octopuses have three hearts and blue blood.",
      "A day on Venus is longer than a year on Venus.",
      "Bananas are berries; strawberries aren’t (botanically speaking).",
      "Your brain uses roughly 20% of your body’s energy.",
      "Lightning is ~5× hotter than the surface of the sun.",
      "There are more trees on Earth than stars in the Milky Way (estimates vary, but it’s close).",
      "A group of flamingos is called a ‘flamboyance.’",
      "Some turtles can breathe through their butts (cloacal respiration).",
      "The Eiffel Tower can grow ~6 inches in summer due to thermal expansion."
    ];

    document.getElementById("factBtn").onclick = () => {
      document.getElementById("randomFact").textContent = pick(FACTS);
      document.getElementById("factTag").textContent = "New";
      setTimeout(() => document.getElementById("factTag").textContent = "Tap", 2000);
    };

    /* -------------------------
       Time (LA vs Durham)
    ------------------------- */
    function fmt(tz){
      return new Intl.DateTimeFormat([],{
        timeZone: tz, hour: "numeric", minute: "2-digit"
      }).format(new Date());
    }
    function updateTime(){
      document.getElementById("laTime").textContent = fmt("America/Los_Angeles");
      document.getElementById("durhamTime").textContent = fmt("America/New_York");
    }
    updateTime();
    setInterval(updateTime, 20000);

    /* -------------------------
       Weather (Open-Meteo)
    ------------------------- */
    const WMO = {
      0:"Clear", 1:"Mostly clear", 2:"Partly cloudy", 3:"Overcast",
      45:"Fog", 48:"Rime fog",
      51:"Light drizzle", 53:"Drizzle", 55:"Heavy drizzle",
      61:"Light rain", 63:"Rain", 65:"Heavy rain",
      71:"Light snow", 73:"Snow", 75:"Heavy snow",
      80:"Rain showers", 81:"Rain showers", 82:"Violent showers",
      95:"Thunderstorm"
    };

    async function weather(lat, lon){
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&temperature_unit=fahrenheit&timezone=auto`;
      const res = await fetch(url);
      return res.json();
    }

    async function loadWeather(){
      try{
        const [la, du] = await Promise.all([
          weather(34.0522, -118.2437),  // LA
          weather(35.9940, -78.8986)   // Durham
        ]);

        document.getElementById("laTemp").textContent = Math.round(la.current.temperature_2m) + "°F";
        document.getElementById("durhamTemp").textContent = Math.round(du.current.temperature_2m) + "°F";

        document.getElementById("laDesc").textContent = WMO[la.current.weather_code] || "—";
        document.getElementById("durhamDesc").textContent = WMO[du.current.weather_code] || "—";

        const t = new Date().toLocaleTimeString([], {hour:"numeric", minute:"2-digit"});
        document.getElementById("updatedAt").textContent = `Updated ${t}`;
      } catch(e){
        document.getElementById("laDesc").textContent = "Unavailable";
        document.getElementById("durhamDesc").textContent = "Unavailable";
        document.getElementById("updatedAt").textContent = "Weather unavailable";
      }
    }
    loadWeather();
    setInterval(loadWeather, 30 * 60 * 1000);

    /* -------------------------
       Breathing (4–4–6 ×3)
    ------------------------- */
    const phases = [["Inhale",4],["Hold",4],["Exhale",6]];
    let bi=null, pi=0, ci=0, start=0, dur=0;

    function stopB(){
      if (bi) clearInterval(bi);
      bi=null; pi=0; ci=0;
      document.getElementById("breathPhase").textContent = "Ready.";
      document.getElementById("breathBar").style.width = "0%";
    }

    function startB(){
      stopB();
      ci = 1; pi = 0;
      nextP();
    }

    function nextP(){
      if (ci > 3){
        document.getElementById("breathPhase").textContent = "Done. Nice.";
        return;
      }

      const [label, seconds] = phases[pi];
      start = Date.now();
      dur = seconds * 1000;
      document.getElementById("breathPhase").textContent = `${label} (${ci}/3)`;

      bi = setInterval(() => {
        const p = Math.min(1, (Date.now() - start) / dur);

        if (label === "Inhale") {
          document.getElementById("breathBar").style.width = (p * 100) + "%";
        } else if (label === "Hold") {
          document.getElementById("breathBar").style.width = "100%";
        } else { // Exhale
          document.getElementById("breathBar").style.width = (100 - p * 100) + "%";
        }

        if (p >= 1){
          clearInterval(bi);
          bi = null;

          pi++;
          if (pi >= phases.length){
            pi = 0;
            ci++;
          }
          nextP();
        }
      }, 100);
    }

    document.getElementById("breathStart").onclick = startB;
    document.getElementById("breathStop").onclick = stopB;
  </script>
</body>
</html>
