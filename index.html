<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Youâ€™ve Got This</title>

  <style>
    :root{
      /* Locked night mode */
      --accent: #355e3b;        /* hunter green */
      --card: rgba(17,24,39,0.88);
      --text: #f9fafb;
      --muted: rgba(249,250,251,0.78);
      --border: rgba(55,65,81,0.8);
      --overlay: rgba(0,0,0,0.62);
      --shadow: 0 10px 30px rgba(0,0,0,0.5);
      --pill: rgba(17,24,39,0.65);
      --chip: rgba(53,94,59,0.18);
      --ok: rgba(16,185,129,0.18);
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px;
      overflow-x: hidden;
    }

    /* Background video */
    .bg-video {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: var(--overlay);
      z-index: 1;
    }

    .wrap {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 740px;
    }

    .card {
      background: var(--card);
      border-radius: 22px;
      padding: 26px;
      box-shadow: var(--shadow);
      border-top: 6px solid var(--accent);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
    }

    h1 {
      margin: 0 0 6px;
      font-size: 28px;
      font-weight: 650;
      letter-spacing: -0.02em;
    }

    p {
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.35;
    }

    iframe { margin-top: 10px; }

    .spotify-note {
      font-size: 13px;
      color: rgba(156,163,175,0.95);
      margin-top: 6px;
    }

    /* Widgets */
    .widget{
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 12px 14px;
      background: rgba(17,24,39,0.45);
      margin-top: 16px;
    }

    .widget-title{
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chip{
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid var(--border);
    }

    /* Time + Weather */
    .tw-row{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
    }

    .tw-card{
      flex:1;
      min-width: 220px;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
      background: rgba(17,24,39,0.35);
    }

    .tw-top{
      display:flex;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .tw-city, .tw-time{
      font-size: 13px;
      color: var(--muted);
    }

    .tw-temp{
      font-size: 18px;
      font-weight: 650;
    }

    .tw-desc{
      font-size: 12px;
      color: rgba(156,163,175,0.95);
    }

    .bigline{
      font-size: 18px;
      font-weight: 650;
    }

    .smallline{
      font-size: 13px;
      color: rgba(156,163,175,0.95);
    }

    /* Breathing */
    .bar{
      height: 10px;
      border-radius: 999px;
      background: rgba(55,65,81,0.45);
      border: 1px solid var(--border);
      overflow: hidden;
      margin: 8px 0;
    }

    .bar > div{
      height: 100%;
      width: 0%;
      background: rgba(53,94,59,0.75);
      transition: width 200ms linear;
    }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .action{
      font-size: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      cursor: pointer;
      background: rgba(17,24,39,0.45);
      color: var(--text);
    }

    .action.primary{
      background: var(--accent);
      border: none;
      font-weight: 650;
    }

    /* Ravenclaw logic */
    .logic{
      display:none;
      margin-top: 10px;
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
    }

    .logic.show{ display:block; }

    .logic table{
      width:100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .logic th, .logic td{
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
    }

    .logic th{
      color: var(--muted);
      background: rgba(17,24,39,0.35);
    }

    .logic td:last-child{
      background: var(--ok);
    }

    /* Bottom-right signature */
    .signature-fixed{
      position: fixed;
      right: 14px;
      bottom: 12px;
      font-size: 13px;
      color: rgba(249,250,251,0.55);
      z-index: 3;
      pointer-events: none;
    }

    @media (max-width: 420px){
      h1 { font-size: 24px; }
      .card { padding: 22px; }
    }
  </style>
</head>

<body>
  <!-- Toronto night background -->
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="toronto.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <div class="wrap">
    <div class="card">
      <h1>Hey Anis.</h1>
      <p>This is here for whenever things feel heavy â€” no expectations.</p>

      <!-- Spotify -->
      <iframe
        style="border-radius:12px"
        src="https://open.spotify.com/embed/playlist/37i9dQZF1E4qQ00I1Jm1ay?theme=0"
        width="100%"
        height="90"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy">
      </iframe>
      <div class="spotify-note">Something steady for long days.</div>

      <!-- Time + Weather -->
      <div class="widget">
        <div class="widget-title">
          <span>Right now</span>
          <span class="chip" id="updatedAt">Updatingâ€¦</span>
        </div>

        <div class="tw-row">
          <div class="tw-card">
            <div class="tw-top">
              <span class="tw-city">Anis â€¢ Los Angeles</span>
              <span class="tw-time" id="laTime">â€”</span>
            </div>
            <div class="tw-temp" id="laTemp">â€”</div>
            <div class="tw-desc" id="laDesc">â€”</div>
          </div>

          <div class="tw-card">
            <div class="tw-top">
              <span class="tw-city">You â€¢ Durham</span>
              <span class="tw-time" id="durhamTime">â€”</span>
            </div>
            <div class="tw-temp" id="durhamTemp">â€”</div>
            <div class="tw-desc" id="durhamDesc">â€”</div>
          </div>
        </div>
      </div>

      <!-- Daily quote -->
      <div class="widget">
        <div class="widget-title"><span>Daily quote</span></div>
        <div class="bigline" id="dailyQuote"></div>
      </div>

      <!-- Todayâ€™s intention -->
      <div class="widget">
        <div class="widget-title"><span>Todayâ€™s intention</span></div>
        <div class="bigline" id="dailyIntention"></div>
      </div>

      <!-- Habit nudge -->
      <div class="widget">
        <div class="widget-title"><span>Streak-free nudge</span></div>
        <div class="bigline" id="habitNudge"></div>
        <div class="smallline">If it happens, great. If not, also fine.</div>
      </div>

      <!-- Breathing -->
      <div class="widget">
        <div class="widget-title"><span>Take a breath (4â€“4â€“6)</span></div>
        <div class="smallline" id="breathPhase">Ready.</div>
        <div class="bar"><div id="breathBar"></div></div>
        <div class="btnrow">
          <button class="action primary" id="breathStart">Start</button>
          <button class="action" id="breathStop">Stop</button>
        </div>
      </div>

      <!-- Encouragement + actions -->
      <div class="widget">
        <div class="btnrow">
          <button class="action primary" id="encourageBtn">Give me one thing</button>
          <button class="action" id="copyTextBtn">Send me this</button>
          <button class="action" id="toggleLogicBtn">Ravenclaw logic</button>
        </div>

        <div class="bigline" id="encourageLine" style="margin-top:12px;"></div>
        <div class="smallline" id="signatureLine"></div>
        <div class="smallline" id="copyNote"></div>

        <div class="logic" id="logicBox">
          <table>
            <tr><th>Claim</th><th>Evidence</th></tr>
            <tr><td>You belong here.</td><td>Acceptance + preparation + performance.</td></tr>
            <tr><td>Bad moments â‰  bad doctor.</td><td>Signal â‰  identity.</td></tr>
            <tr><td>Rest improves judgment.</td><td>Cognitive recovery increases precision.</td></tr>
          </table>
        </div>
      </div>

    </div>
  </div>

  <!-- Bottom-right signature -->
  <div class="signature-fixed">love, Paris</div>

  <script>
    /* Daily deterministic picks */
    const QUOTES = [
      "Slow is smooth. Smooth is fast.",
      "Do the next right thing.",
      "Calm is a form of power.",
      "Precision beats panic."
    ];
    const INTENTIONS = [
      "Be present.",
      "One patient at a time.",
      "Choose calm.",
      "Protect your energy."
    ];
    const NUDGES = [
      "Drink water.",
      "Unclench your jaw.",
      "Lower your shoulders.",
      "Eat something real."
    ];
    function daySeed(){
      const d=new Date();
      return d.getFullYear()*10000+(d.getMonth()+1)*100+d.getDate();
    }
    const s=daySeed();
    document.getElementById("dailyQuote").textContent=QUOTES[s%QUOTES.length];
    document.getElementById("dailyIntention").textContent=INTENTIONS[s%INTENTIONS.length];
    document.getElementById("habitNudge").textContent=NUDGES[s%NUDGES.length];

    /* Encouragement */
    const encouragement=[
      "You earned this â€” completely.",
      "You belong exactly where you are.",
      "Quiet confidence goes a long way.",
      "Rest is part of staying sharp."
    ];
    document.getElementById("encourageBtn").onclick=()=>{
      document.getElementById("encourageLine").textContent=
        encouragement[Math.floor(Math.random()*encouragement.length)];
      document.getElementById("signatureLine").textContent="â€” someone in your corner";
    };

    /* Copy text */
    document.getElementById("copyTextBtn").onclick=async()=>{
      await navigator.clipboard.writeText(
        "Long day. Thinking of you. No pressure to reply ðŸ¤"
      );
      document.getElementById("copyNote").textContent="Copied.";
    };

    /* Logic toggle */
    document.getElementById("toggleLogicBtn").onclick=()=>{
      document.getElementById("logicBox").classList.toggle("show");
    };

    /* Time */
    function fmt(tz){
      return new Intl.DateTimeFormat([],{
        timeZone:tz,hour:"numeric",minute:"2-digit"
      }).format(new Date());
    }
    function updateTime(){
      document.getElementById("laTime").textContent=fmt("America/Los_Angeles");
      document.getElementById("durhamTime").textContent=fmt("America/New_York");
    }
    updateTime(); setInterval(updateTime,20000);

    /* Weather */
    const WMO={0:"Clear",1:"Mostly clear",2:"Partly cloudy",3:"Overcast",61:"Light rain",63:"Rain"};
    async function weather(lat,lon){
      const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&temperature_unit=fahrenheit`);
      return r.json();
    }
    async function loadWeather(){
      const [la,du]=await Promise.all([
        weather(34.0522,-118.2437),
        weather(35.994,-78.8986)
      ]);
      document.getElementById("laTemp").textContent=Math.round(la.current.temperature_2m)+"Â°F";
      document.getElementById("durhamTemp").textContent=Math.round(du.current.temperature_2m)+"Â°F";
      document.getElementById("laDesc").textContent=WMO[la.current.weather_code]||"â€”";
      document.getElementById("durhamDesc").textContent=WMO[du.current.weather_code]||"â€”";
      document.getElementById("updatedAt").textContent="Updated";
    }
    loadWeather(); setInterval(loadWeather,1800000);

    /* Breathing */
    const phases=[["Inhale",4],["Hold",4],["Exhale",6]];
    let bi=null,pi=0,ci=0,start=0,dur=0;
    function stopB(){
      clearInterval(bi); bi=null; pi=0; ci=0;
      document.getElementById("breathPhase").textContent="Ready.";
      document.getElementById("breathBar").style.width="0%";
    }
    function startB(){
      stopB(); ci=1; nextP();
    }
    function nextP(){
      if(ci>3){document.getElementById("breathPhase").textContent="Done.";return;}
      const [l,s]=phases[pi]; start=Date.now(); dur=s*1000;
      document.getElementById("breathPhase").textContent=`${l} (${ci}/3)`;
      bi=setInterval(()=>{
        const p=Math.min(1,(Date.now()-start)/dur);
        document.getElementById("breathBar").style.width=
          l==="Exhale"?(100-p*100)+"%":(l==="Hold"? "100%":(p*100)+"%");
        if(p>=1){clearInterval(bi); pi++; if(pi>=3){pi=0; ci++;} nextP();}
      },100);
    }
    document.getElementById("breathStart").onclick=startB;
    document.getElementById("breathStop").onclick=stopB;
  </script>
</body>
</html>
