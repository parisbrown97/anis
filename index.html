<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Youâ€™ve Got This</title>

  <style>
    :root{
      /* Locked night mode */
      --accent: #355e3b;        /* hunter green */
      --card: rgba(17,24,39,0.88);
      --text: #f9fafb;
      --muted: rgba(249,250,251,0.78);
      --border: rgba(55,65,81,0.8);
      --overlay: rgba(0,0,0,0.62);
      --shadow: 0 10px 30px rgba(0,0,0,0.5);
      --chip: rgba(53,94,59,0.18);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px;
      overflow-x: hidden;
    }

    /* Background video */
    .bg-video {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: var(--overlay);
      z-index: 1;
    }

    .wrap {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 960px;
    }

    .card {
      background: var(--card);
      border-radius: 22px;
      padding: 26px;
      box-shadow: var(--shadow);
      border-top: 6px solid var(--accent);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
    }

    h1 {
      margin: 0 0 6px;
      font-size: 28px;
      font-weight: 650;
      letter-spacing: -0.02em;
    }

    p {
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.35;
    }

    /* Widgets */
    .widget{
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 12px 14px;
      background: rgba(17,24,39,0.45);
      margin-top: 16px;
    }

    .widget-title{
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .chip{
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid var(--border);
      white-space: nowrap;
    }

    .note{
      margin-top: 8px;
      font-size: 12px;
      color: rgba(156,163,175,0.95);
    }

    .bigline{
      font-size: 18px;
      font-weight: 650;
      line-height: 1.25;
    }

    .smallline{
      font-size: 13px;
      color: rgba(156,163,175,0.95);
      margin-top: 4px;
    }

    /* Spotify + Kiss row */
    .row-spotify{
      display: grid;
      grid-template-columns: 2fr 1fr; /* 2/3 and 1/3 */
      gap: 12px;
      margin-top: 6px;
    }
    @media (max-width: 860px){
      .row-spotify{ grid-template-columns: 1fr; }
    }

    iframe { width: 100%; }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .action{
      font-size: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      cursor: pointer;
      background: rgba(17,24,39,0.45);
      color: var(--text);
    }

    .action.primary{
      background: var(--accent);
      border: none;
      font-weight: 650;
    }

    /* Time + Weather */
    .tw-row{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
    }

    .tw-card{
      flex:1;
      min-width: 240px;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
      background: rgba(17,24,39,0.35);
    }

    .tw-top{
      display:flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 6px;
    }

    .tw-city, .tw-time{
      font-size: 13px;
      color: var(--muted);
    }

    .tw-time { white-space: nowrap; text-align: right; }

    .tw-temp{
      font-size: 18px;
      font-weight: 650;
    }

    .tw-desc{
      font-size: 12px;
      color: rgba(156,163,175,0.95);
    }

    /* Daily quote/intention/nudge row */
    .grid3{
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 16px;
    }
    @media (max-width: 860px){
      .grid3{ grid-template-columns: 1fr; }
    }

    /* Breathing */
    .bar{
      height: 10px;
      border-radius: 999px;
      background: rgba(55,65,81,0.45);
      border: 1px solid var(--border);
      overflow: hidden;
      margin: 8px 0 0;
    }

    .bar > div{
      height: 100%;
      width: 0%;
      background: rgba(53,94,59,0.75);
      transition: width 200ms linear;
    }

    /* Buttons widget (Open when...) */
    .open-when-grid{
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 760px){
      .open-when-grid{ grid-template-columns: 1fr; }
    }

    .openbtn{
      text-align: left;
      width: 100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(17,24,39,0.35);
      color: rgba(249,250,251,0.92);
      cursor: pointer;
      font-size: 14px;
      line-height: 1.25;
    }
    .openbtn:hover{ background: rgba(17,24,39,0.55); }

    .open-note{
      margin-top: 12px;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
      background: rgba(17,24,39,0.35);
      min-height: 74px;
    }

    /* Random facts + Recipes row */
    .grid2{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 16px;
    }
    @media (max-width: 860px){
      .grid2{ grid-template-columns: 1fr; }
    }

    .linkpill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(17,24,39,0.35);
      text-decoration: none;
      color: rgba(249,250,251,0.88);
      font-size: 13px;
      white-space: nowrap;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .linkpill:hover{ background: rgba(17,24,39,0.55); }

    /* Bottom-right signature */
    .signature-fixed{
      position: fixed;
      right: 14px;
      bottom: 12px;
      font-size: 13px;
      color: rgba(249,250,251,0.55);
      z-index: 3;
      pointer-events: none;
    }

    @media (max-width: 420px){
      h1 { font-size: 24px; }
      .card { padding: 22px; }
      .tw-card { min-width: 100%; }
    }
  </style>
</head>

<body>
  <!-- Toronto night background -->
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="toronto.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <div class="wrap">
    <div class="card">
      <h1>Hey Anis.</h1>
      <p>This is here for whenever things feel heavy â€” no expectations.</p>

      <!-- Spotify (2/3) + Kiss (1/3) -->
      <div class="row-spotify">
        <div class="widget" style="margin-top:0;">
          <div class="widget-title">
            <span>Playlist</span>
            <span class="chip">for long days</span>
          </div>

          <iframe
            style="border-radius:12px"
            src="https://open.spotify.com/embed/playlist/37i9dQZF1E4qQ00I1Jm1ay?utm_source=generator&theme=0"
            height="120"
            frameborder="0"
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy">
          </iframe>

          <div class="smallline">Something steady.</div>
        </div>

        <div class="widget" style="margin-top:0;">
          <div class="widget-title">
            <span>Press here for a kiss</span>
            <span class="chip">audio</span>
          </div>

          <div class="bigline" style="font-size:16px; font-weight:600;">
            If you need a tiny reset.
          </div>

          <div class="btnrow">
            <button class="action primary" id="kissBtn">ðŸ’‹</button>
            <button class="action" id="kissStopBtn">Stop</button>
          </div>

          <div class="smallline" id="kissNote">Tip: upload your kiss audio files into the repo, then list them in the code.</div>

          <!-- Hidden audio player (plays on button click) -->
          <audio id="kissAudio" preload="auto"></audio>
        </div>
      </div>

      <!-- Time + Weather -->
      <div class="widget">
        <div class="widget-title">
          <span>Right now</span>
          <span class="chip" id="updatedAt">Updatingâ€¦</span>
        </div>

        <div class="tw-row">
          <div class="tw-card">
            <div class="tw-top">
              <span class="tw-city">Anis â€¢ Los Angeles</span>
              <span class="tw-time" id="laTime">â€”</span>
            </div>
            <div class="tw-temp" id="laTemp">â€”</div>
            <div class="tw-desc" id="laDesc">â€”</div>
          </div>

          <div class="tw-card">
            <div class="tw-top">
              <span class="tw-city">You â€¢ Durham</span>
              <span class="tw-time" id="durhamTime">â€”</span>
            </div>
            <div class="tw-temp" id="durhamTemp">â€”</div>
            <div class="tw-desc" id="durhamDesc">â€”</div>
          </div>
        </div>

        <div class="note">LA + Durham time & weather (no logins, no tracking).</div>
      </div>

      <!-- Daily quote + intention + nudge in ONE row -->
      <div class="grid3">
        <div class="widget" style="margin-top:0;">
          <div class="widget-title"><span>Daily quote</span><span class="chip">Today</span></div>
          <div class="bigline" id="dailyQuote">â€”</div>
          <div class="smallline">A quiet reminder.</div>
        </div>

        <div class="widget" style="margin-top:0;">
          <div class="widget-title"><span>Todayâ€™s intention</span><span class="chip">Today</span></div>
          <div class="bigline" id="dailyIntention">â€”</div>
          <div class="smallline">One direction for the day.</div>
        </div>

        <div class="widget" style="margin-top:0;">
          <div class="widget-title"><span>Streak-free nudge</span><span class="chip">No streaks</span></div>
          <div class="bigline" id="habitNudge">â€”</div>
          <div class="smallline">If it happens, great. If not, also fine.</div>
        </div>
      </div>

      <!-- Take a breath -->
      <div class="widget">
        <div class="widget-title">
          <span>Take a breath</span>
          <span class="chip">4â€“4â€“6 Ã—3</span>
        </div>

        <div class="smallline" id="breathPhase">Ready.</div>
        <div class="bar"><div id="breathBar"></div></div>

        <div class="btnrow">
          <button class="action primary" id="breathStart">Start</button>
          <button class="action" id="breathStop">Stop</button>
        </div>

        <div class="smallline">Inhale 4 â€¢ Hold 4 â€¢ Exhale 6 (repeat x3)</div>
      </div>

      <!-- Open-when buttons (replaces Support section) -->
      <div class="widget">
        <div class="widget-title">
          <span>Open whenâ€¦</span>
          <span class="chip">no pressure</span>
        </div>

        <div class="open-when-grid">
          <button class="openbtn" data-key="anxious">â€¦youâ€™re anxious</button>
          <button class="openbtn" data-key="rough">â€¦you had a rough case</button>
          <button class="openbtn" data-key="tired">â€¦youâ€™re exhausted</button>
          <button class="openbtn" data-key="cantSleep">â€¦you canâ€™t sleep</button>
          <button class="openbtn" data-key="missMe">â€¦you miss me</button>
          <button class="openbtn" data-key="win">â€¦you had a good day</button>
        </div>

        <div class="open-note">
          <div class="bigline" id="openTitle" style="font-size:16px;">Pick a button.</div>
          <div class="smallline" id="openText">Iâ€™ll be right here.</div>
        </div>
      </div>

      <!-- Random facts + Random recipe -->
      <div class="grid2">
        <!-- Random facts -->
        <div class="widget" style="margin-top:0;">
          <div class="widget-title">
            <span>Random facts</span>
            <span class="chip" id="factTag">Tap</span>
          </div>

          <div class="bigline" id="randomFact" style="min-height:70px;">Want a tiny distraction?</div>

          <div class="btnrow">
            <button class="action primary" id="factBtn">New fact</button>
          </div>

          <div class="smallline">Lightweight on purpose.</div>
        </div>

        <!-- Recipe please (random from your list of URLs) -->
        <div class="widget" style="margin-top:0;">
          <div class="widget-title">
            <span>Recipe please</span>
            <span class="chip">random link</span>
          </div>

          <div class="bigline" style="font-size:16px; font-weight:600;">
            Need food? I got you.
          </div>

          <div class="btnrow">
            <button class="action primary" id="recipeBtn">Pick a recipe</button>
            <a class="action" id="recipeOpen" href="#" target="_blank" rel="noopener noreferrer" style="text-decoration:none; display:none;">
              Open
            </a>
          </div>

          <div class="note" id="recipeLabel">Add your recipe URLs in the code and this will randomize them.</div>

          <a class="linkpill" id="recipeLink" href="#" target="_blank" rel="noopener noreferrer" style="display:none;">
            â€”
          </a>
        </div>
      </div>

    </div>
  </div>

  <!-- Bottom-right signature -->
  <div class="signature-fixed">love, Paris</div>

  <script>
    /* -------------------------
       Daily deterministic picks
    ------------------------- */
    const QUOTES = [
      "Slow is smooth. Smooth is fast.",
      "Do the next right thing.",
      "You can be tired and still be capable.",
      "Calm is a form of power.",
      "Precision beats panic.",
      "Keep it simple. Keep it steady."
    ];

    const INTENTIONS = [
      "Be present.",
      "One patient, one task.",
      "Choose calm.",
      "Do what you can control.",
      "Protect your energy.",
      "Stay kind to yourself."
    ];

    const NUDGES = [
      "Drink water.",
      "Eat something real.",
      "Unclench your jaw.",
      "Lower your shoulders.",
      "Step outside for 60 seconds.",
      "Sleep when you can."
    ];

    function daySeed(){
      const d = new Date();
      return d.getFullYear()*10000 + (d.getMonth()+1)*100 + d.getDate();
    }
    function pickDaily(arr, salt=0){
      const s = daySeed() + salt*101;
      return arr[s % arr.length];
    }

    document.getElementById("dailyQuote").textContent = pickDaily(QUOTES, 1);
    document.getElementById("dailyIntention").textContent = pickDaily(INTENTIONS, 2);
    document.getElementById("habitNudge").textContent = pickDaily(NUDGES, 3);

    /* -------------------------
       Time (LA vs Durham)
    ------------------------- */
    function fmt(tz){
      return new Intl.DateTimeFormat([],{
        timeZone: tz, hour: "numeric", minute: "2-digit"
      }).format(new Date());
    }
    function updateTime(){
      document.getElementById("laTime").textContent = fmt("America/Los_Angeles");
      document.getElementById("durhamTime").textContent = fmt("America/New_York");
    }
    updateTime();
    setInterval(updateTime, 20000);

    /* -------------------------
       Weather (Open-Meteo)
    ------------------------- */
    const WMO = {
      0:"Clear", 1:"Mostly clear", 2:"Partly cloudy", 3:"Overcast",
      45:"Fog", 48:"Rime fog",
      51:"Light drizzle", 53:"Drizzle", 55:"Heavy drizzle",
      61:"Light rain", 63:"Rain", 65:"Heavy rain",
      71:"Light snow", 73:"Snow", 75:"Heavy snow",
      80:"Rain showers", 81:"Rain showers", 82:"Violent showers",
      95:"Thunderstorm"
    };

    async function weather(lat, lon){
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&temperature_unit=fahrenheit&timezone=auto`;
      const res = await fetch(url);
      return res.json();
    }

    async function loadWeather(){
      try{
        const [la, du] = await Promise.all([
          weather(34.0522, -118.2437),  // LA
          weather(35.9940, -78.8986)   // Durham
        ]);

        document.getElementById("laTemp").textContent = Math.round(la.current.temperature_2m) + "Â°F";
        document.getElementById("durhamTemp").textContent = Math.round(du.current.temperature_2m) + "Â°F";

        document.getElementById("laDesc").textContent = WMO[la.current.weather_code] || "â€”";
        document.getElementById("durhamDesc").textContent = WMO[du.current.weather_code] || "â€”";

        const t = new Date().toLocaleTimeString([], {hour:"numeric", minute:"2-digit"});
        document.getElementById("updatedAt").textContent = `Updated ${t}`;
      } catch(e){
        document.getElementById("laDesc").textContent = "Unavailable";
        document.getElementById("durhamDesc").textContent = "Unavailable";
        document.getElementById("updatedAt").textContent = "Weather unavailable";
      }
    }
    loadWeather();
    setInterval(loadWeather, 30 * 60 * 1000);

    /* -------------------------
       Breathing (4â€“4â€“6 Ã—3)
    ------------------------- */
    const phases = [["Inhale",4],["Hold",4],["Exhale",6]];
    let bi=null, pi=0, ci=0, start=0, dur=0;

    function stopB(){
      if (bi) clearInterval(bi);
      bi=null; pi=0; ci=0;
      document.getElementById("breathPhase").textContent = "Ready.";
      document.getElementById("breathBar").style.width = "0%";
    }

    function startB(){
      stopB();
      ci = 1; pi = 0;
      nextP();
    }

    function nextP(){
      if (ci > 3){
        document.getElementById("breathPhase").textContent = "Done. Nice.";
        return;
      }

      const [label, seconds] = phases[pi];
      start = Date.now();
      dur = seconds * 1000;
      document.getElementById("breathPhase").textContent = `${label} (${ci}/3)`;

      bi = setInterval(() => {
        const p = Math.min(1, (Date.now() - start) / dur);

        if (label === "Inhale") {
          document.getElementById("breathBar").style.width = (p * 100) + "%";
        } else if (label === "Hold") {
          document.getElementById("breathBar").style.width = "100%";
        } else { // Exhale
          document.getElementById("breathBar").style.width = (100 - p * 100) + "%";
        }

        if (p >= 1){
          clearInterval(bi);
          bi = null;

          pi++;
          if (pi >= phases.length){
            pi = 0;
            ci++;
          }
          nextP();
        }
      }, 100);
    }

    document.getElementById("breathStart").onclick = startB;
    document.getElementById("breathStop").onclick = stopB;

    /* -------------------------
       Open-when notes (buttons)
       Edit these to sound exactly like you.
    ------------------------- */
    const OPEN_WHEN = {
      anxious: {
        title: "If youâ€™re anxious",
        text: "Just breathe with me for one minute.\nYou donâ€™t have to solve everything right now.\nPick the next smallest step. Thatâ€™s enough."
      },
      rough: {
        title: "If you had a rough case",
        text: "Iâ€™m sorry. I know that sits heavy.\nYouâ€™re still a good doctor.\nTake a breath, drink water, and let your nervous system come down."
      },
      tired: {
        title: "If youâ€™re exhausted",
        text: "Youâ€™ve carried a lot.\nDo the bare minimum for yourself tonight.\nFood + water + sleep â€” in any order."
      },
      cantSleep: {
        title: "If you canâ€™t sleep",
        text: "No spiraling.\nOne slow inhale, one slower exhale.\nTomorrow can wait. Right now is just quiet."
      },
      missMe: {
        title: "If you miss me",
        text: "I miss you too.\nIâ€™m proud of you â€” even from far away.\nPress the kiss button if you want something small and real."
      },
      win: {
        title: "If you had a good day",
        text: "Hold onto it.\nYou earned that.\nLet it be evidence on the harder days."
      }
    };

    document.querySelectorAll(".openbtn").forEach(btn => {
      btn.addEventListener("click", () => {
        const key = btn.getAttribute("data-key");
        const item = OPEN_WHEN[key];
        document.getElementById("openTitle").textContent = item.title;
        document.getElementById("openText").textContent = item.text;
      });
    });

    /* -------------------------
       Random facts
    ------------------------- */
    const FACTS = [
      "Honey never spoils â€” sealed jars have been found edible thousands of years later.",
      "Octopuses have three hearts and blue blood.",
      "A day on Venus is longer than a year on Venus.",
      "Bananas are berries; strawberries arenâ€™t (botanically speaking).",
      "Your brain uses roughly 20% of your bodyâ€™s energy.",
      "Lightning is ~5Ã— hotter than the surface of the sun.",
      "A group of flamingos is called a â€˜flamboyance.â€™",
      "Some turtles can breathe through their butts (cloacal respiration).",
      "The Eiffel Tower can grow in summer due to thermal expansion."
    ];
    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    document.getElementById("factBtn").onclick = () => {
      document.getElementById("randomFact").textContent = pick(FACTS);
      document.getElementById("factTag").textContent = "New";
      setTimeout(() => document.getElementById("factTag").textContent = "Tap", 1500);
    };

    /* -------------------------
       Kiss audio
       1) Upload your audio files into the repo (same folder as index.html),
          e.g. kiss1.mp3, kiss2.mp3, kiss3.mp3
       2) List them below.
    ------------------------- */
    const KISS_AUDIO_FILES = [
      "kiss1.mp3",
      "kiss2.mp3"
      // add more like: "kiss3.mp3"
    ];

    const kissAudio = document.getElementById("kissAudio");
    const kissNote  = document.getElementById("kissNote");

    function randomKissFile(){
      if (!KISS_AUDIO_FILES.length) return null;
      return KISS_AUDIO_FILES[Math.floor(Math.random()*KISS_AUDIO_FILES.length)];
    }

    document.getElementById("kissBtn").addEventListener("click", async () => {
      const f = randomKissFile();
      if (!f){
        kissNote.textContent = "Upload a kiss audio file and add its filename in KISS_AUDIO_FILES.";
        return;
      }
      try{
        kissAudio.pause();
        kissAudio.currentTime = 0;
        kissAudio.src = f;
        await kissAudio.play(); // requires user click (this button counts)
        kissNote.textContent = "mwah.";
      } catch(e){
        kissNote.textContent = "Your browser blocked playback. Try again after interacting with the page.";
      }
    });

    document.getElementById("kissStopBtn").addEventListener("click", () => {
      kissAudio.pause();
      kissAudio.currentTime = 0;
      kissNote.textContent = "ok.";
    });

    /* -------------------------
       Recipes (random URL list you control)
       Paste YOUR recipe URLs here.
    ------------------------- */
    const RECIPE_URLS = [
      // Paste your recipe URLs here (as many as you want):
      // "https://www.seriouseats.com/...",
      // "https://www.budgetbytes.com/...",
      // "https://www.allrecipes.com/..."
    ];

    const recipeBtn  = document.getElementById("recipeBtn");
    const recipeLink = document.getElementById("recipeLink");
    const recipeOpen = document.getElementById("recipeOpen");
    const recipeLabel= document.getElementById("recipeLabel");

    function prettyHost(url){
      try{
        const u = new URL(url);
        return u.hostname.replace("www.","");
      } catch(e){
        return "recipe link";
      }
    }

    function pickRecipe(){
      if (!RECIPE_URLS.length){
        recipeLabel.textContent = "Add your recipe URLs in RECIPE_URLS (in the code) and this will randomize them.";
        recipeLink.style.display = "none";
        recipeOpen.style.display = "none";
        return;
      }
      const url = RECIPE_URLS[Math.floor(Math.random()*RECIPE_URLS.length)];
      recipeLabel.textContent = "Hereâ€™s one:";
      recipeLink.textContent = `Open on ${prettyHost(url)}`;
      recipeLink.href = url;
      recipeLink.style.display = "inline-flex";

      recipeOpen.href = url;
      recipeOpen.style.display = "inline-block";
    }

    recipeBtn.addEventListener("click", pickRecipe);
    // Optional: pick one on page load
    // pickRecipe();
  </script>
</body>
</html>
